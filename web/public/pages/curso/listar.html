<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WR Cursos - Listar Cursos</title>
    <link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../styles/components/actionbar.css">
    <link rel="stylesheet" href="../../styles/components/back-button.css">
    <link rel="stylesheet" href="../../styles/components/button.css">
    <link rel="stylesheet" href="../../styles/components/header.css">
    <link rel="stylesheet" href="../../styles/base/reset.css">
    <link rel="stylesheet" href="../../styles/components/table.css">
    <link rel="stylesheet" href="../../styles/components/alert.css">
</head>

<body>
    <header class="header" id="header">
        <div class="header__logo">
            <img src="../../img/logo.png" alt="Logo da Empresa">
            <h1>Painel do Administrador</h1>
        </div>
        <div class="header__logged-user">
            <span id="username">usuario</span>
            <div class="header__user-picture" id="user-picture">
                <img src="../../img/icons/user-solid.svg" alt="Foto do usuário logado">
                <ul class="header__user-options is-hidden" id="user-options">
                    <li>
                        <a href="">Alterar as minhas informações</a>
                    </li>
                    <li>
                        <a href="">Sair</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    
    <main>
        <div class="alerts" id="alerts"></div>

        <div class="back-button">
            <a href="http://127.0.0.1:8081/pages/home/home">
                <img src="../../img/arrow-left-circle 1.png" alt="Voltar">
            </a>
        </div>

        <section>
            <div class="actionbar">
                <h2 class="actionbar__title">Cursos cadastrados</h2>
                <div class="actionbar__searchbar">
                    <input type="text" placeholder="Pesquisar" id="search-input" oninput="searchOnTable('search-input', 'courses')">
                    <a href="http://127.0.0.1:8081/pages/curso/cadastrar">Cadastrar Curso</a>
                </div>
            </div>

            <div class="table__container">
                <table id="courses">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Nome</th>
                            <th>Descrição</th>
                            <th>C.H</th>
                            <th>Valor</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <p id="empty-table-message" class="table__description is-hidden">Nenhum curso foi encontrado!</p>
            </div>
        </section>
    </main>

    <script src="../../scripts/alert.js"></script>
    <script src="../../scripts/token.js"></script>
    <script src="../../scripts/session.js"></script>
    <script src="../../scripts/curso.js"></script>
    <script src="../../scripts/search-table.js"></script>
    <script src="../../scripts/header.js"></script>
    <script>
        window.onload = () => {
            loadSession();
            listarCursos();
            let urlQueryString = window.location.search;
            let urlQueryParams = new URLSearchParams(urlQueryString);
            if (urlQueryParams.has("alertType") && urlQueryParams.has("alertMessage")) {
                showAlert(urlQueryParams.get("alertType"), urlQueryParams.get("alertMessage"));
            }
        };
    </script>
</body>

</html>